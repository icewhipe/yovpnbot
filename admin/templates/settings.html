{% extends "base.html" %}

{% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∏ - YoVPN Admin{% endblock %}
{% block page_title %}‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    {% if request.query_params.get('updated') %}
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6">
        ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
    </div>
    {% endif %}
    
    <!-- Mode Toggles -->
    <div class="card mb-6">
        <h3 class="text-xl font-semibold mb-4">üîß –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã</h3>
        
        <div class="space-y-4">
            <!-- Maintenance Mode -->
            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                    <h4 class="font-semibold">üõ†Ô∏è –†–µ–∂–∏–º —Ç–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</h4>
                    <p class="text-sm text-gray-600">–ë–æ—Ç –Ω–µ –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                </div>
                <form method="POST" action="/admin/settings/mode/maintenance">
                    <button type="submit" class="px-4 py-2 rounded-lg font-semibold {% if settings.maintenance_mode == 'true' %}bg-red-500 text-white{% else %}bg-green-500 text-white{% endif %}">
                        {% if settings.maintenance_mode == 'true' %}
                            –í–∫–ª—é—á–µ–Ω (–í—ã–∫–ª—é—á–∏—Ç—å)
                        {% else %}
                            –í—ã–∫–ª—é—á–µ–Ω (–í–∫–ª—é—á–∏—Ç—å)
                        {% endif %}
                    </button>
                </form>
            </div>
            
            <!-- WebApp Mode -->
            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                    <h4 class="font-semibold">üåê WebApp —Ä–µ–∂–∏–º</h4>
                    <p class="text-sm text-gray-600">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebApp –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∏–Ω–∞—á–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π)</p>
                </div>
                <form method="POST" action="/admin/settings/mode/webapp">
                    <button type="submit" class="px-4 py-2 rounded-lg font-semibold {% if settings.webapp_enabled == 'true' %}bg-green-500 text-white{% else %}bg-gray-500 text-white{% endif %}">
                        {% if settings.webapp_enabled == 'true' %}
                            –í–∫–ª—é—á–µ–Ω (–í—ã–∫–ª—é—á–∏—Ç—å)
                        {% else %}
                            –í—ã–∫–ª—é—á–µ–Ω (–í–∫–ª—é—á–∏—Ç—å)
                        {% endif %}
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Settings Form -->
    <div class="card">
        <h3 class="text-xl font-semibold mb-4">üí∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞</h3>
        
        <form method="POST" action="/admin/settings/update" class="space-y-6">
            <!-- Hidden inputs for modes -->
            <input type="hidden" name="maintenance_mode" value="{{ settings.maintenance_mode }}">
            <input type="hidden" name="webapp_enabled" value="{{ settings.webapp_enabled }}">
            
            <!-- Welcome Bonus -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    üíé –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å (—Ä—É–±–ª–∏)
                </label>
                <input type="number" name="welcome_bonus" value="{{ settings.welcome_bonus }}" 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                <p class="text-sm text-gray-500 mt-1">–ë–æ–Ω—É—Å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ (3 –¥–Ω—è = 12 —Ä—É–±)</p>
            </div>
            
            <!-- Daily Price -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    üíµ –¶–µ–Ω–∞ –∑–∞ –¥–µ–Ω—å (—Ä—É–±–ª–∏)
                </label>
                <input type="number" name="daily_price" value="{{ settings.daily_price }}" 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                <p class="text-sm text-gray-500 mt-1">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –¥–Ω—è –ø–æ–¥–ø–∏—Å–∫–∏</p>
            </div>
            
            <!-- Referral Bonus -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    üéÅ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–æ–Ω—É—Å (—Ä—É–±–ª–∏)
                </label>
                <input type="number" name="referral_bonus" value="{{ settings.referral_bonus }}" 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                <p class="text-sm text-gray-500 mt-1">–ë–æ–Ω—É—Å –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞ (2 –¥–Ω—è = 8 —Ä—É–±)</p>
            </div>
            
            <!-- Min Deposit -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    üí≥ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (—Ä—É–±–ª–∏)
                </label>
                <input type="number" name="min_deposit" value="{{ settings.min_deposit }}" 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                <p class="text-sm text-gray-500 mt-1">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞</p>
            </div>
            
            <!-- Support Username -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    üí¨ Username –ø–æ–¥–¥–µ—Ä–∂–∫–∏
                </label>
                <input type="text" name="support_username" value="{{ settings.support_username }}" 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                       placeholder="@YoVPNSupport">
            </div>
            
            <!-- Channel Username -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    üì¢ Username –∫–∞–Ω–∞–ª–∞
                </label>
                <input type="text" name="channel_username" value="{{ settings.channel_username }}" 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                       placeholder="@YoVPN">
            </div>
            
            <!-- Submit Button -->
            <div class="flex justify-end">
                <button type="submit" class="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-semibold">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
