# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Railway

## ‚ùå –¢–µ–∫—É—â–∏–µ –æ—à–∏–±–∫–∏

### 1. Webapp: `sh: next: not found`
Railway –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å webapp –ë–ï–ó —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2. Bot: `‚ö†Ô∏è Marzban API URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω`
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ (commit—Ç—é –∏–∑–º–µ–Ω–µ–Ω–∏—è)

```bash
git add .
git commit -m "Fix Railway deployment configuration"
git push origin main
```

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Railway

#### –°–µ—Ä–≤–∏—Å: telegram-bot (–ë–æ—Ç)

**–î–æ–±–∞–≤—å—Ç–µ/–ò—Å–ø—Ä–∞–≤—å—Ç–µ:**
```bash
TELEGRAM_BOT_TOKEN="8385845645:AAGiZhSwkRgndegtTsy573Smnul2wFNwLu0"
MARZBAN_API_URL="https://–≤–∞—à-marzban-—Å–µ—Ä–≤–µ—Ä.com/api"
MARZBAN_ADMIN_TOKEN="–≤–∞—à_–Ω–æ–≤—ã–π_—Ç–æ–∫–µ–Ω_–Ω–µ_–∏—Å—Ç–µ–∫—à–∏–π"
SECRET_KEY="–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞-—Å–ª—É—á–∞–π–Ω–∞—è-—Å—Ç—Ä–æ–∫–∞"
```

**–£–¥–∞–ª–∏—Ç–µ (–µ—Å–ª–∏ –µ—Å—Ç—å):**
- `USERBOT_TOKEN` (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TELEGRAM_BOT_TOKEN` –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ)

#### –°–µ—Ä–≤–∏—Å: webapp (–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

**–î–æ–±–∞–≤—å—Ç–µ/–ò—Å–ø—Ä–∞–≤—å—Ç–µ:**
```bash
# –ö–†–ò–¢–ò–ß–ù–û - –¥–æ–±–∞–≤—å—Ç–µ —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é!
MARZBAN_API_URL="https://–≤–∞—à-marzban-—Å–µ—Ä–≤–µ—Ä.com/api"

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ URL (–¥–æ–±–∞–≤—å—Ç–µ https://)
NEXT_PUBLIC_API_BASE_URL="https://api-production-8ffe.up.railway.app"
NEXT_PUBLIC_BASE_URL="https://webapp-production-5fe6.up.railway.app"

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
TELEGRAM_BOT_TOKEN="8385845645:AAGiZhSwkRgndegtTsy573Smnul2wFNwLu0"
MARZBAN_ADMIN_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
NODE_ENV="production"
NEXT_PUBLIC_TELEGRAM_BOT_TOKEN="8385845645:AAGiZhSwkRgndegtTsy573Smnul2wFNwLu0"
NEXT_PUBLIC_DEV_MODE="false"
```

#### –°–µ—Ä–≤–∏—Å: api (API —Å–µ—Ä–≤–µ—Ä)

**–î–æ–±–∞–≤—å—Ç–µ/–ò—Å–ø—Ä–∞–≤—å—Ç–µ:**
```bash
TELEGRAM_BOT_TOKEN="8385845645:AAGiZhSwkRgndegtTsy573Smnul2wFNwLu0"
MARZBAN_API_URL="https://–≤–∞—à-marzban-—Å–µ—Ä–≤–µ—Ä.com/api"
MARZBAN_ADMIN_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
SECRET_KEY="—Ç–æ—Ç-–∂–µ-–∫–ª—é—á-—á—Ç–æ-–∏-–≤-–±–æ—Ç–µ"
```

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π Marzban —Ç–æ–∫–µ–Ω

**–í–∞—à —Ç–µ–∫—É—â–∏–π —Ç–æ–∫–µ–Ω –∏—Å—Ç—ë–∫!** (exp: 1761066994 = 21 –æ–∫—Ç—è–±—Ä—è 2024)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å Marzban
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ admin
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
4. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π API —Ç–æ–∫–µ–Ω
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ
6. –í—Å—Ç–∞–≤—å—Ç–µ –≤–æ –í–°–ï —Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ Railway –∫–∞–∫ `MARZBAN_ADMIN_TOKEN`

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Railway

#### –î–ª—è webapp:
1. –ó–∞–π–¥–∏—Ç–µ –≤ Settings —Å–µ—Ä–≤–∏—Å–∞ webapp
2. –í —Ä–∞–∑–¥–µ–ª–µ **Deploy**:
   - **Root Directory**: `webapp`
   - **Watch Paths**: `webapp/**`
3. –í —Ä–∞–∑–¥–µ–ª–µ **Networking**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

#### –î–ª—è bot:
1. –ó–∞–π–¥–∏—Ç–µ –≤ Settings —Å–µ—Ä–≤–∏—Å–∞ bot
2. –í —Ä–∞–∑–¥–µ–ª–µ **Deploy**:
   - **Root Directory**: –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º
   - **Start Command**: `python bot/main.py`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

#### –î–ª—è api:
1. –ó–∞–π–¥–∏—Ç–µ –≤ Settings —Å–µ—Ä–≤–∏—Å–∞ api
2. –í —Ä–∞–∑–¥–µ–ª–µ **Deploy**:
   - **Root Directory**: `api`
   - **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 5: Redeploy –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å
2. –ù–∞–∂–º–∏—Ç–µ **Deployments**
3. –ù–∞–∂–º–∏—Ç–µ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãÆ) —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è
4. –í—ã–±–µ—Ä–∏—Ç–µ **Redeploy**

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π—Ç–µ:
```bash
git commit --allow-empty -m "Trigger redeploy"
git push
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### Bot –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ MarzbanService –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: https://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.com/api
‚úÖ Marzban API –¥–æ—Å—Ç—É–ø–µ–Ω
üöÄ –ó–∞–ø—É—Å–∫ YoVPN Bot...
‚úì Ready to handle updates
```

### Webapp –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
```
[nixpacks] Installing dependencies...
[nixpacks] Building application...
Route (app)                              Size     First Load JS
‚úì Compiled successfully
[nixpacks] Starting application...
‚úì Ready in XXXms
```

### API –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
```
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:XXXX
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

1. **MARZBAN_API_URL** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ü–û–õ–ù–´–ú URL —Å `https://`
2. **–¢–æ–∫–µ–Ω Marzban** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–ï–ô–°–¢–í–ò–¢–ï–õ–¨–ù–´–ú (–Ω–µ –∏—Å—Ç–µ–∫—à–∏–º)
3. **–í—Å–µ URL** –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://`
4. **SECRET_KEY** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö

## üéØ –ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏ –∑–∞–ø—É—à–µ–Ω –≤ GitHub
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `MARZBAN_API_URL` –≤–æ –í–°–ï —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã URL (–¥–æ–±–∞–≤–ª–µ–Ω `https://`)
- [ ] –ü–æ–ª—É—á–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –ù–û–í–´–ô —Ç–æ–∫–µ–Ω Marzban (—Å—Ç–∞—Ä—ã–π –∏—Å—Ç—ë–∫!)
- [ ] –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ `USERBOT_TOKEN` ‚Üí `TELEGRAM_BOT_TOKEN`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã Root Directory –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω Redeploy –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ - –Ω–µ—Ç –æ—à–∏–±–æ–∫
- [ ] Bot –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram
- [ ] Webapp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] API –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã

## üìû –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
1. Railway Dashboard ‚Üí –°–µ—Ä–≤–∏—Å ‚Üí Deployments ‚Üí View Logs
2. –ò—â–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Marzban —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –≤–∞—à `MARZBAN_API_URL` –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è.
