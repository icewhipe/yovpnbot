# üöÄ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Railway

> **–í–µ—Ä—Å–∏—è:** 2.0 (–û–±–Ω–æ–≤–ª–µ–Ω–æ: 22.10.2025)  
> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ `sh: next: not found`](#-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–æ—à–∏–±–∫–∏-sh-next-not-found)
3. [–î–µ–ø–ª–æ–π WebApp (Next.js)](#-–¥–µ–ø–ª–æ–π-webapp-nextjs)
4. [–î–µ–ø–ª–æ–π API (FastAPI)](#-–¥–µ–ø–ª–æ–π-api-fastapi)
5. [–î–µ–ø–ª–æ–π –ë–æ—Ç–∞ (aiogram)](#-–¥–µ–ø–ª–æ–π-–±–æ—Ç–∞-aiogram)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
7. [–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ](#-—Ç–∏–ø–∏—á–Ω—ã–µ-–æ—à–∏–±–∫–∏-–∏-–∏—Ö-—Ä–µ—à–µ–Ω–∏–µ)
8. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏)

---

## ‚úÖ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ Railway

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [railway.app](https://railway.app)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ GitHub
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email

### 2. GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ GitHub:

```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/yourusername/yovpn.git
git push -u origin main
```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef1234567890abcdef1234567890

# Database (Railway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
DATABASE_URL=postgresql://user:password@host:port/database

# API
API_URL=https://your-api.railway.app
WEBAPP_URL=https://your-webapp.railway.app

# Marzban (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
MARZBAN_URL=https://your-marzban.com
MARZBAN_USERNAME=admin
MARZBAN_PASSWORD=your-password
```

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ `sh: next: not found`

### –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏

–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞:
1. `next` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `dependencies` (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `devDependencies`)
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –≤ Dockerfile
3. `node_modules` –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ production –æ–±—Ä–∞–∑

### ‚úÖ –†–µ—à–µ–Ω–∏–µ (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ)

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `webapp/Dockerfile`:

```dockerfile
# Stage 1: Dependencies
FROM node:18-alpine AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /app

COPY package.json package-lock.json* ./
RUN npm ci

# Stage 2: Builder
FROM node:18-alpine AS builder
WORKDIR /app

COPY --from=deps /app/node_modules ./node_modules
COPY . .

# Disable telemetry
ENV NEXT_TELEMETRY_DISABLED 1

# Build the application
RUN npm run build

# Stage 3: Runner
FROM node:18-alpine AS runner
WORKDIR /app

ENV NODE_ENV production
ENV NEXT_TELEMETRY_DISABLED 1

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public

# Set the correct permission for prerender cache
RUN mkdir .next
RUN chown nextjs:nodejs .next

# Automatically leverage output traces to reduce image size
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs

EXPOSE 3000

ENV PORT 3000
ENV HOSTNAME "0.0.0.0"

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ö–û–ú–ê–ù–î–ê (–Ω–µ `next start`)
CMD ["node", "server.js"]
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ `package.json`

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `next` –≤ `dependencies`:

```json
{
  "dependencies": {
    "next": "^15.0.2",
    "react": "^18.3.1",
    "react-dom": "^18.3.1"
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ `next.config.js`

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω standalone —Ä–µ–∂–∏–º:

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'standalone', // ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è Docker
  reactStrictMode: true,
}

module.exports = nextConfig
```

---

## üåê –î–µ–ø–ª–æ–π WebApp (Next.js)

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ [railway.app/new](https://railway.app/new)
2. **Deploy from GitHub repo**
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `yovpn`
4. –ù–∞–∑–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å: `yovpn-webapp`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ–ø–ª–æ—è

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞:

1. **Root Directory**: `/webapp`
2. **Build Command**: `npm run build`
3. **Start Command**: –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Dockerfile)

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Dockerfile

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç `webapp/Dockerfile`.

–ï—Å–ª–∏ –Ω–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–µ–Ω—å `/webapp/railway.json`:

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile"
  },
  "deploy": {
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "healthcheckPath": "/",
    "healthcheckTimeout": 100
  }
}
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway Dashboard ‚Üí Variables:

```env
NODE_ENV=production
NEXT_PUBLIC_API_URL=https://your-api.railway.app
NEXT_PUBLIC_BOT_USERNAME=your_bot
PORT=3000
```

### –®–∞–≥ 5: Deploy!

```bash
# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º push
git add .
git commit -m "Deploy webapp to Railway"
git push origin main
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞

1. Railway –ø–æ–∫–∞–∂–µ—Ç URL: `https://yovpn-webapp-production.up.railway.app`
2. –û—Ç–∫—Ä–æ–π—Ç–µ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```
Railway Dashboard ‚Üí yovpn-webapp ‚Üí Logs
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**

```
‚úì Ready in 2.1s
‚úì Compiled successfully
Server ready on http://0.0.0.0:3000
```

**‚ùå –ù–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨:**

```
sh: next: not found  ‚ùå
```

---

## üîå –î–µ–ø–ª–æ–π API (FastAPI)

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

1. Railway Dashboard ‚Üí **New Service**
2. **Deploy from GitHub repo** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ç –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –ù–∞–∑–æ–≤–∏—Ç–µ: `yovpn-api`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **Root Directory**: `/api`
2. **Build Command**: `pip install -r requirements.txt`
3. **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`

### –®–∞–≥ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
DATABASE_URL=${{Postgres.DATABASE_URL}}
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHI...
MARZBAN_URL=https://your-marzban.com
MARZBAN_USERNAME=admin
MARZBAN_PASSWORD=your-password
WEBAPP_URL=https://yovpn-webapp-production.up.railway.app
PORT=8000
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. Railway Dashboard ‚Üí **New Service**
2. **Add PostgreSQL**
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç `DATABASE_URL`
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é: `${{Postgres.DATABASE_URL}}`

### –®–∞–≥ 5: Deploy

```bash
git push origin main
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-api.railway.app/docs`

–î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è Swagger UI —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API.

---

## ü§ñ –î–µ–ø–ª–æ–π –ë–æ—Ç–∞ (aiogram)

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

1. Railway Dashboard ‚Üí **New Service**
2. **Deploy from GitHub repo**
3. –ù–∞–∑–æ–≤–∏—Ç–µ: `yovpn-bot`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **Root Directory**: `/` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
2. **Build Command**: `pip install -r requirements.txt`
3. **Start Command**: `python -m bot.main`

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ `railway.json` –≤ –∫–æ—Ä–Ω–µ:

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "startCommand": "python -m bot.main"
  }
}
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
TELEGRAM_BOT_TOKEN=1234567890:ABC...
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef...
DATABASE_URL=${{Postgres.DATABASE_URL}}
API_URL=https://your-api.railway.app
WEBAPP_URL=https://your-webapp.railway.app
MARZBAN_URL=https://your-marzban.com
MARZBAN_USERNAME=admin
MARZBAN_PASSWORD=your-password
```

### –®–∞–≥ 4: Deploy

```bash
git push origin main
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

Railway ‚Üí yovpn-bot ‚Üí Logs

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**

```
INFO:bot.main:üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
INFO:bot.main:‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
INFO:aiogram:Bot @your_bot_name started
```

---

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –î–ª—è WebApp

```env
# Next.js Public Variables (–¥–æ—Å—Ç—É–ø–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
NEXT_PUBLIC_API_URL=https://your-api.railway.app
NEXT_PUBLIC_BOT_USERNAME=your_bot
NEXT_PUBLIC_WEBAPP_URL=https://your-webapp.railway.app

# Server-side Variables
NODE_ENV=production
PORT=3000
```

### –î–ª—è API

```env
# Database
DATABASE_URL=${{Postgres.DATABASE_URL}}

# Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABC...

# Marzban
MARZBAN_URL=https://your-marzban.com
MARZBAN_USERNAME=admin
MARZBAN_PASSWORD=your-password

# URLs
WEBAPP_URL=https://your-webapp.railway.app

# Server
PORT=8000
ENVIRONMENT=production
```

### –î–ª—è –ë–æ—Ç–∞

```env
# Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABC...
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef...

# Database
DATABASE_URL=${{Postgres.DATABASE_URL}}

# Services
API_URL=https://your-api.railway.app
WEBAPP_URL=https://your-webapp.railway.app
MARZBAN_URL=https://your-marzban.com
MARZBAN_USERNAME=admin
MARZBAN_PASSWORD=your-password

# Settings
ENVIRONMENT=production
LOG_LEVEL=INFO
```

---

## ‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ

### 1. `sh: next: not found`

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –∏–ª–∏ `next` –≤ `devDependencies`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `package.json` - `next` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `dependencies`
2. –í Dockerfile –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CMD ["node", "server.js"]` –≤–º–µ—Å—Ç–æ `next start`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `output: 'standalone'` –≤ `next.config.js`

### 2. `Module not found: Can't resolve 'next'`

**–ü—Ä–∏—á–∏–Ω–∞:** `node_modules` –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ production –æ–±—Ä–∞–∑

**–†–µ—à–µ–Ω–∏–µ:**
```dockerfile
# –í builder stage
COPY --from=deps /app/node_modules ./node_modules
COPY . .
RUN npm run build
```

### 3. `Error: ENOENT: no such file or directory, open 'server.js'`

**–ü—Ä–∏—á–∏–Ω–∞:** Standalone —Ä–µ–∂–∏–º –Ω–µ —Å–æ–∑–¥–∞–ª `server.js`

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `next.config.js`:
```javascript
output: 'standalone',
```

–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
```bash
npm run build
ls .next/standalone  # –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å server.js
```

### 4. `Failed to load SWC binary`

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Apple Silicon / x86)

**–†–µ—à–µ–Ω–∏–µ:**
–í `package.json` –¥–æ–±–∞–≤—å—Ç–µ:
```json
{
  "optionalDependencies": {
    "@next/swc-linux-x64-gnu": "^15.0.2",
    "@next/swc-linux-x64-musl": "^15.0.2"
  }
}
```

### 5. Railway build timeout

**–ü—Ä–∏—á–∏–Ω–∞:** –î–æ–ª–≥–∞—è —Å–±–æ—Ä–∫–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è Next.js)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.dockerignore`:
```
node_modules
.next
.git
*.md
```

2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ `npm ci` –≤–º–µ—Å—Ç–æ `npm install`

### 6. `Cannot find module 'bot/main'`

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Root Directory

**–†–µ—à–µ–Ω–∏–µ:**
- –î–ª—è –±–æ—Ç–∞ Root Directory = `/` (–∫–æ—Ä–µ–Ω—å)
- –î–ª—è API Root Directory = `/api`
- –î–ª—è WebApp Root Directory = `/webapp`

### 7. PostgreSQL connection failed

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `DATABASE_URL`

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway reference:
```env
DATABASE_URL=${{Postgres.DATABASE_URL}}
```

–ù–µ —Ö–∞—Ä–¥–∫–æ–¥—å—Ç–µ URL!

### 8. CORS errors –≤ WebApp

**–ü—Ä–∏—á–∏–Ω–∞:** API –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å Railway –¥–æ–º–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
–í `api/app/main.py`:
```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "https://your-webapp.railway.app",
        "https://*.up.railway.app",
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

Railway Dashboard ‚Üí –°–µ—Ä–≤–∏—Å ‚Üí **Logs**

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ª–æ–≥–æ–≤

**–ë–æ—Ç:**
```python
import logging
logger = logging.getLogger(__name__)
logger.info("‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç")
logger.error("‚ùå –û—à–∏–±–∫–∞!")
```

**API:**
```python
import logging
logging.info("API endpoint called")
```

**WebApp (–≤ Railway):**
```bash
console.log("WebApp loaded")
# –õ–æ–≥–∏ –±—É–¥—É—Ç –≤ Railway Dashboard
```

### Health Checks

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–∞.

**–î–ª—è API** –¥–æ–±–∞–≤—å—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç:
```python
@app.get("/health")
def health_check():
    return {"status": "healthy"}
```

**–î–ª—è WebApp** Railway –ø–∏–Ω–≥—É–µ—Ç `/`

### –ú–µ—Ç—Ä–∏–∫–∏

Railway ‚Üí Service ‚Üí **Metrics**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- CPU usage
- Memory usage
- Network traffic
- Response time

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### WebApp
- [ ] `next` –≤ `dependencies`, –Ω–µ –≤ `devDependencies`
- [ ] `output: 'standalone'` –≤ `next.config.js`
- [ ] Dockerfile –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CMD ["node", "server.js"]`
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `NEXT_PUBLIC_*` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] `.dockerignore` —Å–æ–∑–¥–∞–Ω
- [ ] `npm run build` —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

### API
- [ ] `requirements.txt` –∞–∫—Ç—É–∞–ª–µ–Ω
- [ ] `DATABASE_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] CORS middleware –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health` –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] Start command: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`

### –ë–æ—Ç
- [ ] `TELEGRAM_BOT_TOKEN` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Root directory = `/` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
- [ ] Start command: `python -m bot.main`
- [ ] `DATABASE_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã (API, WebApp) –¥–æ—Å—Ç—É–ø–Ω—ã

---

## üöÄ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤—Å–µ—Ö 3 —Å–µ—Ä–≤–∏—Å–æ–≤:

### 1. WebApp
```bash
curl https://your-webapp.railway.app
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É
```

### 2. API
```bash
curl https://your-api.railway.app/health
# {"status":"healthy"}
```

### 3. –ë–æ—Ç
–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É –≤ Telegram.

–î–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway Dashboard
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [Railway Docs](https://docs.railway.app/)
3. –û—Ç–∫—Ä–æ–π—Ç–µ Issue –Ω–∞ GitHub
4. Telegram: @yovpn_support

---

## ‚úÖ –£—Å–ø–µ—Ö!

–ï—Å–ª–∏ –≤—Å–µ 3 —Å–µ—Ä–≤–∏—Å–∞ —Ä–∞–±–æ—Ç–∞—é—Ç:

- ‚úÖ WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à –ø—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Railway! üéâ**

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 22.10.2025  
**–ê–≤—Ç–æ—Ä:** YoVPN Team  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT
