# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ Railway –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```
ERROR: Cannot install -r requirements.txt (line 51), -r requirements.txt (line 54) and -r requirements.txt (line 61) 
because these package versions have conflicting dependencies.

The conflict is caused by:
    pytest 7.4.3 depends on packaging
    black 23.11.0 depends on packaging>=22.0
    safety 2.3.5 depends on packaging<22.0 and >=21.0
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–†–∞–∑–¥–µ–ª–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ –¥–≤–∞ —Ñ–∞–π–ª–∞:

### 1. `requirements-prod.txt` (–¥–ª—è Production)
–°–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:
- Aiogram (Telegram Bot)
- SQLAlchemy (Database)
- Redis (Caching)
- Pydantic (Validation)
- –ò –¥—Ä—É–≥–∏–µ runtime –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ë–ï–ó** –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (pytest, black, mypy –∏ —Ç.–¥.)

### 2. `requirements-dev.txt` (–¥–ª—è Development)
–í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ + –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- pytest (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- black (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- mypy (type checking)
- flake8 (linting)
- safety (security checking) - **–æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ 3.2.11**

### 3. `requirements.txt` (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
–û–±–Ω–æ–≤–ª–µ–Ω `safety` –¥–æ –≤–µ—Ä—Å–∏–∏ `3.2.11` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –Ω–æ–≤—ã–º `packaging`

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Dockerfile

```dockerfile
# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements-prod.txt .

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Ç–æ–ª—å–∫–æ production)
RUN pip install --no-cache-dir -r requirements-prod.txt
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ù–∞ Railway (Production)
Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `Dockerfile` –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `requirements-prod.txt`.

**–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!**

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤–∫–ª—é—á–∞—è dev-tools)
pip install -r requirements-dev.txt

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements-prod.txt
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤

| –§–∞–π–ª | –ü–∞–∫–µ—Ç–æ–≤ | –†–∞–∑–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ |
|------|---------|------------------|
| requirements-prod.txt | ~40 | ~300 MB |
| requirements-dev.txt | ~50 | ~400 MB |

**–≠–∫–æ–Ω–æ–º–∏—è –≤ production**: ~100 MB –∏ –±—ã—Å—Ç—Ä–µ–µ –¥–µ–ø–ª–æ–π!

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ –¥–µ–ø–ª–æ–π** - –º–µ–Ω—å—à–µ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
2. ‚úÖ **–ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞** - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ** - –º–µ–Ω—å—à–µ attack surface –≤ production
4. ‚úÖ **–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** - dev-tools –Ω–µ –º–µ—à–∞—é—Ç production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º

## üîç –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### –§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:
- ‚úÖ `requirements-prod.txt` - production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ `requirements-dev.txt` - development –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:
- ‚úÖ `Dockerfile` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `requirements-prod.txt`
- ‚úÖ `requirements.txt` - –æ–±–Ω–æ–≤–ª–µ–Ω `safety` –¥–æ 3.2.11

### –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚úÖ –í–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üì¶ Railway –¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. **Push –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub**:
   ```bash
   git add .
   git commit -m "Fix: Separate production and dev dependencies"
   git push
   ```

2. **Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç**:
   - –û–±–Ω–∞—Ä—É–∂–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Dockerfile
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç —Ç–æ–ª—å–∫–æ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è ‚ú®

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Railway –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 21.10.2025
