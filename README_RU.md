# 🚀 YoVPN Bot - Полное руководство по развертыванию

<div align="center">

![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)
![aiogram](https://img.shields.io/badge/aiogram-3.4+-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.109+-green.svg)
![MySQL](https://img.shields.io/badge/MySQL-8.0+-orange.svg)
![Railway](https://img.shields.io/badge/Railway-Ready-purple.svg)

**Современный Telegram бот для продажи VPN подписок с интеграцией Marzban и полноценной админ-панелью**

[🇬🇧 English](README.md) | [🇷🇺 Русский](README_RU.md)

</div>

---

## 📚 Документация по развертыванию

Этот проект содержит подробные руководства по развертыванию на различных платформах.

### 🎯 Выберите ваш путь:

<table>
<tr>
<td width="33%" align="center">

### 🚀 Railway
**Самый простой способ**

Идеально для начинающих

[📖 Полное руководство](RAILWAY_ПОЛНОЕ_РУКОВОДСТВО.md)

[⚡ Быстрый старт](RAILWAY_БЫСТРЫЙ_СТАРТ.md)

[🎯 Шпаргалка](RAILWAY_ШПАРГАЛКА.md)

**Время:** 10-40 минут  
**Сложность:** ⭐ Легко

</td>
<td width="33%" align="center">

### 🖥️ VPS
**Полный контроль**

Для опытных пользователей

[📖 Руководство в README](README.md#vps-ubuntu-2404)

**Время:** 1-2 часа  
**Сложность:** ⭐⭐⭐ Сложно

</td>
<td width="33%" align="center">

### 🐳 Docker
**Универсальное решение**

Работает везде

[📖 Руководство в README](README.md#docker)

**Время:** 20-40 минут  
**Сложность:** ⭐⭐ Средне

</td>
</tr>
</table>

### 📖 Индекс документации

👉 **[РАЗВЕРТЫВАНИЕ.md](РАЗВЕРТЫВАНИЕ.md)** - Полный индекс всех руководств

---

## 🎯 Рекомендуемый путь для начинающих

### 1️⃣ Подготовка (5 минут)

Подготовьте следующие данные:

- ✅ **Telegram Bot Token** - получите у [@BotFather](https://t.me/BotFather)
  - Команда: `/newbot`
  - Сохраните токен: `123456789:ABCdef...`

- ✅ **Ваш Telegram ID** - узнайте у [@userinfobot](https://t.me/userinfobot)
  - Команда: `/start`
  - Сохраните ID: например `7610842643`

- ✅ **Marzban данные:**
  - URL сервера: `https://marzban.example.com`
  - Username администратора
  - Password администратора

- ✅ **SECRET_KEY** - сгенерируйте:
  ```bash
  python3 -c "import secrets; print(secrets.token_urlsafe(32))"
  ```

### 2️⃣ Регистрация на Railway (2 минуты)

1. Откройте [railway.app](https://railway.app)
2. Нажмите "Start a New Project" или "Login"
3. Войдите через GitHub
4. Подтвердите email

**Бонус:** $5 бесплатно каждый месяц! 💰

### 3️⃣ Форк репозитория (1 минута)

1. Откройте GitHub: https://github.com/yourusername/yovpn-bot
2. Нажмите **Fork** в правом верхнем углу
3. Дождитесь создания форка

### 4️⃣ Развертывание (10-20 минут)

Следуйте подробному руководству:

**👉 [RAILWAY_БЫСТРЫЙ_СТАРТ.md](RAILWAY_БЫСТРЫЙ_СТАРТ.md)** - для быстрого старта

**или**

**👉 [RAILWAY_ПОЛНОЕ_РУКОВОДСТВО.md](RAILWAY_ПОЛНОЕ_РУКОВОДСТВО.md)** - для пошаговой инструкции

### 5️⃣ Проверка (5 минут)

После развертывания проверьте:

- ✅ Бот отвечает на `/start` в Telegram
- ✅ Админ панель открывается в браузере
- ✅ База данных подключена
- ✅ Marzban API доступен

---

## 📋 Что включено в проект

### 🤖 Telegram Bot

- ✅ **Два режима:** WebApp (современный UI) и текстовый режим
- ✅ **Приветственный бонус:** 3 дня бесплатного доступа
- ✅ **Реферальная система:** 5 уровней с бонусами
- ✅ **Автоматическая активация VPN** через Marzban
- ✅ **Ежедневная модель оплаты:** 4 рубля в день
- ✅ **Статистика:** использование трафика и времени
- ✅ **Мультиязычность:** русский и другие языки

### ⚙️ Админ-панель

- ✅ **Современный веб-интерфейс:** FastAPI + Jinja2 + Tailwind CSS
- ✅ **Управление пользователями:** блокировка, баланс, статистика
- ✅ **Управление подписками:** активация, продление, деактивация
- ✅ **Финансы:** транзакции, балансы, доходы
- ✅ **Рассылки:** с фото и кнопками
- ✅ **Настройки:** цены, бонусы, режимы работы
- ✅ **Marzban интеграция:** синхронизация, статистика
- ✅ **Безопасность:** логи, мониторинг, бэкапы

### 🗄️ База данных

- ✅ **MySQL 8.0+:** надежное хранение данных
- ✅ **Redis:** кэширование для быстрого доступа
- ✅ **Alembic миграции:** безопасное обновление схемы
- ✅ **Индексы и оптимизация:** быстрые запросы

### 🔐 Безопасность

- ✅ **Шифрование данных:** SECRET_KEY для токенов
- ✅ **Защита админ панели:** доступ только администратору
- ✅ **Валидация данных:** защита от инъекций
- ✅ **Rate limiting:** защита от спама
- ✅ **Логирование:** отслеживание всех действий

---

## 🎨 Скриншоты

### Telegram Bot

```
┌─────────────────────────────┐
│  🎉 Добро пожаловать в      │
│     YoVPN!                  │
│                             │
│  На вашем балансе:          │
│  💰 12.00 ₽                 │
│  (3 дня бесплатно)          │
│                             │
│  ┌───────────┬──────────┐   │
│  │ 🔐 VPN    │ 💳 Баланс│   │
│  ├───────────┼──────────┤   │
│  │ 👥 Рефер. │ 💬 Помощь│   │
│  └───────────┴──────────┘   │
└─────────────────────────────┘
```

### Админ-панель

```
┌─────────────────────────────────────────┐
│  📊 YoVPN Admin Panel                   │
├─────────────────────────────────────────┤
│                                         │
│  ┌──────────┬───────────┬─────────┐    │
│  │ Польз-и  │ Активные  │ Баланс  │    │
│  │   247    │    142    │ 52,480₽ │    │
│  └──────────┴───────────┴─────────┘    │
│                                         │
│  [📊 Статистика] [👥 Пользователи]     │
│  [💰 Балансы]    [🔧 Подписки]         │
│  [📢 Рассылка]   [⚙️ Настройки]        │
│                                         │
└─────────────────────────────────────────┘
```

---

## 🛠️ Технологический стек

### Backend
- **Python 3.11+** - современная версия Python
- **aiogram 3.4+** - асинхронный фреймворк для Telegram ботов
- **FastAPI 0.109+** - современный веб-фреймворк для API
- **SQLAlchemy 2.0+** - ORM для работы с базой данных
- **Alembic** - система миграций базы данных
- **aiohttp** - асинхронный HTTP клиент
- **asyncio** - асинхронное программирование

### База данных
- **MySQL 8.0+** - основная база данных
- **Redis 7.0+** - кэширование и очереди

### Frontend (Admin Panel)
- **Jinja2** - шаблонизатор
- **Tailwind CSS** - CSS фреймворк
- **Alpine.js** - легкий JavaScript фреймворк

### Инфраструктура
- **Railway** - хостинг и деплой
- **Docker** - контейнеризация
- **Nginx** - reverse proxy (для VPS)
- **systemd** - управление сервисами (для VPS)

---

## 📖 Структура документации

### 🎯 Для быстрого старта

1. **[RAILWAY_БЫСТРЫЙ_СТАРТ.md](RAILWAY_БЫСТРЫЙ_СТАРТ.md)** (10 минут)
   - Краткая инструкция
   - Все команды и настройки
   - Чеклист

2. **[RAILWAY_ШПАРГАЛКА.md](RAILWAY_ШПАРГАЛКА.md)**
   - Все команды Railway CLI
   - SQL запросы
   - Troubleshooting

### 📚 Для подробного изучения

3. **[RAILWAY_ПОЛНОЕ_РУКОВОДСТВО.md](RAILWAY_ПОЛНОЕ_РУКОВОДСТВО.md)** (30-40 минут)
   - Подробная пошаговая инструкция
   - Объяснение каждого шага
   - Расширенные настройки
   - Безопасность и оптимизация

4. **[РАЗВЕРТЫВАНИЕ.md](РАЗВЕРТЫВАНИЕ.md)**
   - Сравнение платформ
   - Индекс всех руководств
   - Чеклисты

### 🔧 Дополнительная документация

5. **[ADMIN_PANEL_GUIDE.md](ADMIN_PANEL_GUIDE.md)**
   - Полное руководство по админ панели
   - Все функции и возможности

6. **[README.md](README.md)** (English)
   - Основной README проекта
   - Установка и настройка
   - API документация

7. **[ARCHITECTURE.md](ARCHITECTURE.md)**
   - Архитектура проекта
   - Диаграммы и схемы

---

## 🚀 Быстрый старт (TL;DR)

Для опытных пользователей - минимальная инструкция:

```bash
# 1. Подготовка
- Получите токен у @BotFather
- Узнайте свой Telegram ID у @userinfobot
- Подготовьте данные Marzban
- Сгенерируйте SECRET_KEY

# 2. Railway
- Зарегистрируйтесь на railway.app
- Создайте проект из GitHub репозитория
- Добавьте MySQL и Redis

# 3. Сервисы
- telegram-bot:
  Start Command: python -u bot/main.py
  Variables: TELEGRAM_BOT_TOKEN, ADMIN_TG_ID, DATABASE_URL, MARZBAN_*

- admin-panel:
  Start Command: uvicorn admin.main:app --host 0.0.0.0 --port $PORT
  Variables: ADMIN_TG_ID, DATABASE_URL, ADMIN_PORT=$PORT
  Generate Domain

# 4. Миграции
- Создайте временный сервис
  Start Command: alembic upgrade head
  Variables: DATABASE_URL
- Удалите после выполнения

# 5. Проверка
- Бот: /start в Telegram
- Админ панель: откройте URL в браузере
```

**Подробности:** [RAILWAY_БЫСТРЫЙ_СТАРТ.md](RAILWAY_БЫСТРЫЙ_СТАРТ.md)

---

## 🎓 Обучающие материалы

### Видео уроки (скоро)
- 🎥 Развертывание на Railway (шаг за шагом)
- 🎥 Настройка админ панели
- 🎥 Интеграция с Marzban
- 🎥 Настройка платежных систем

### Статьи
- 📝 Как создать Telegram бота для VPN
- 📝 Оптимизация затрат на Railway
- 📝 Безопасность VPN бота
- 📝 Масштабирование до 10,000 пользователей

---

## 💡 FAQ

### Общие вопросы

**Q: Сколько стоит запустить бота на Railway?**  
A: Railway предоставляет $5 бесплатно каждый месяц. Для малого бота (до 100 пользователей) этого достаточно.

**Q: Нужны ли знания программирования?**  
A: Базовые знания помогут, но подробное руководство позволяет развернуть бота без глубоких знаний.

**Q: Можно ли использовать бесплатно?**  
A: Да, Railway предоставляет $5/месяц бесплатно на Hobby плане.

**Q: Нужен ли собственный VPN сервер?**  
A: Да, вам нужен установленный Marzban на отдельном сервере.

### Технические вопросы

**Q: Как обновить бота?**  
A: Просто сделайте `git push` - Railway автоматически обновит.

**Q: Как сделать бэкап базы данных?**  
A: Используйте `railway connect MySQL` и команду `mysqldump`.

**Q: Можно ли использовать PostgreSQL вместо MySQL?**  
A: Да, но потребуется изменить URL подключения и драйвер.

**Q: Как добавить новую платежную систему?**  
A: Интеграция платежных систем описана в отдельном руководстве.

---

## 🤝 Поддержка и сообщество

### Получить помощь

1. **Документация** - проверьте соответствующее руководство
2. **GitHub Issues** - создайте issue с описанием проблемы
3. **Telegram** - напишите в [@YoVPNSupport](https://t.me/YoVPNSupport)
4. **Канал** - подпишитесь на [@yodevelop](https://t.me/yodevelop)

### Внести вклад

Мы рады вкладу в проект:

1. Fork репозитория
2. Создайте ветку: `git checkout -b feature/amazing-feature`
3. Закоммитьте изменения: `git commit -m 'Add amazing feature'`
4. Push в ветку: `git push origin feature/amazing-feature`
5. Откройте Pull Request

См. [CONTRIBUTING.md](CONTRIBUTING.md) для деталей.

---

## 📊 Статистика проекта

- ⭐ **GitHub Stars:** Поставьте звезду, если проект полезен!
- 🍴 **Forks:** Форкните для своих нужд
- 🐛 **Issues:** Сообщайте о проблемах
- 💬 **Discussions:** Обсуждайте идеи

---

## 📜 Лицензия

Этот проект лицензирован под MIT License - см. файл [LICENSE](LICENSE).

---

## 🙏 Благодарности

Спасибо всем, кто внес вклад в проект:

- [aiogram](https://github.com/aiogram/aiogram) - отличный фреймворк для Telegram ботов
- [FastAPI](https://github.com/tiangolo/fastapi) - современный веб-фреймворк
- [Marzban](https://github.com/Gozargah/Marzban) - VPN панель управления
- [Railway](https://railway.app) - простой хостинг для деплоя

Особая благодарность сообществу за обратную связь и идеи! ❤️

---

## 🎯 Следующие шаги

После успешного развертывания:

1. ✅ **Протестируйте все функции** бота
2. 💳 **Настройте платежную систему** для приема оплаты
3. 📢 **Запустите рекламу** для привлечения пользователей
4. 📊 **Мониторьте метрики** через админ панель
5. 🔄 **Обновляйте и улучшайте** на основе обратной связи
6. 💰 **Зарабатывайте!**

---

<div align="center">

## 🚀 Готовы начать?

### Выберите ваш путь:

**[⚡ Быстрый старт](RAILWAY_БЫСТРЫЙ_СТАРТ.md)** | **[📖 Полное руководство](RAILWAY_ПОЛНОЕ_РУКОВОДСТВО.md)** | **[🎯 Шпаргалка](RAILWAY_ШПАРГАЛКА.md)**

---

**Создано с ❤️ для сообщества VPN**

⭐ Поставьте звезду если проект полезен!

[GitHub](https://github.com/yourusername/yovpn-bot) • [Telegram](https://t.me/yodevelop) • [Support](https://t.me/YoVPNSupport)

*Последнее обновление: 24 октября 2025*

</div>
